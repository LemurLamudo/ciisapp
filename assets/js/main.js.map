{"version":3,"sources":["fetchService.js","main.js","templates.js","validation.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["const fetchService = (function () {\r\n  const BASE_API_URL = \"ajax/\";\r\n\r\n  const fetchData = async (endpoint, settings = {}) => {\r\n    const actions = {\r\n      GET: \"get\",\r\n      POST: \"add\",\r\n      PUT: \"update\",\r\n      DELETE: \"delete\",\r\n      PATCH: \"load\",\r\n    };\r\n\r\n    settings.method = settings.method ?? \"GET\";\r\n\r\n    if (settings.body instanceof FormData) {\r\n      settings.body.append(\"action\", actions[settings.method]);\r\n      settings.body.append(\"hook\", \"bee_hook\");\r\n    } else {\r\n      settings.body.action = actions[settings.method];\r\n      settings.body.hook = \"bee_hook\";\r\n    }\r\n\r\n    settings.body = settings.headers?.[\"Content-type\"]\r\n      ? JSON.stringify(settings.body)\r\n      : settings.body;\r\n    settings.method = \"POST\";\r\n\r\n    const defaultHeaders = {\r\n      Accept: \"application/json\",\r\n      \"X-Requested-With\": \"XMLHttpRequest\",\r\n    };\r\n\r\n    settings.headers = settings.headers\r\n      ? { ...defaultHeaders, ...settings.headers }\r\n      : defaultHeaders;\r\n\r\n    try {\r\n      const response = await fetch(BASE_API_URL + endpoint, settings);\r\n      const json = await response.json();\r\n      return response.ok\r\n        ? json\r\n        : Promise.reject({\r\n            status: response.status,\r\n            message: json.msg,\r\n            data: json.data,\r\n          });\r\n    } catch (error) {\r\n      return Promise.reject({\r\n        message: \"Ocurrio un error\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const get = async (endpoint, settings = {}) => fetchData(endpoint, settings);\r\n  const post = async (endpoint, settings = {}) => {\r\n    settings.method = \"POST\";\r\n    return fetchData(endpoint, settings);\r\n  };\r\n  const put = async (endpoint, settings = {}) => {\r\n    settings.method = \"PUT\";\r\n    return fetchData(endpoint, settings);\r\n  };\r\n  const del = async (endpoint, settings = {}) => {\r\n    settings.method = \"DELETE\";\r\n    return fetchData(endpoint, settings);\r\n  };\r\n  const patch = async (endpoint, settings = {}) => {\r\n    settings.method = \"PATCH\";\r\n    return fetchData(endpoint, settings);\r\n  };\r\n\r\n  return {\r\n    get,\r\n    post,\r\n    put,\r\n    delete: del,\r\n    patch,\r\n  };\r\n})();\r\n\r\nconst postmasterService = (function () {\r\n  const ENDPOINT = \"\";\r\n\r\n  const preinscribir = async (data) => {\r\n    const settings = {\r\n      body: data,\r\n    };\r\n    return await fetchService.post(\"preinscripcion\", settings);\r\n  };\r\n\r\n  const getPonentes = async () => {\r\n    const settings = {\r\n      body: new FormData(),\r\n    };\r\n    return await fetchService.get(\"get_ponentes_postmaster\", settings);\r\n  };\r\n\r\n  return {\r\n    preinscribir,\r\n    getPonentes,\r\n  };\r\n})();\r\n","(function () {\r\n  \"use-strict\";\r\n\r\n  const App = (function () {\r\n    const nav = document.querySelector(\"header\");\r\n    let currentMenuItem;\r\n\r\n    const init = function () {\r\n      addListeners();\r\n\r\n      if (document.querySelector(\"#ponencias\")) loadPonentesPostmaster();\r\n    };\r\n\r\n    const headerStyling = () => {\r\n      if (!nav.classList.contains(\"active\")) {\r\n        window.pageYOffset > 0 ? nav.classList.add(\"fixed\") : nav.classList.remove(\"fixed\");\r\n      }\r\n    };\r\n\r\n    const toggleButton = () => {\r\n      nav.classList.toggle(\"active\");\r\n      nav.classList.toggle(\"fixed\");\r\n    };\r\n\r\n    const toggleSubmenu = (submenu) => {\r\n      if (submenu.classList.contains(\"active\")) {\r\n        submenu.parentNode.querySelector(\"svg path\").setAttribute(\"d\", \"M112 184l144 144 144-144\");\r\n        submenu.classList.remove(\"active\");\r\n        currentMenuItem = false;\r\n      } else {\r\n        submenu.parentNode.querySelector(\"svg path\").setAttribute(\"d\", \"M112 328l144-144 144 144\");\r\n        submenu.classList.add(\"active\");\r\n        currentMenuItem = submenu;\r\n      }\r\n    };\r\n\r\n    const toggleOnMenuClick = (e) => {\r\n      let submenu = e.target.parentNode.querySelector(\".sub-menu\");\r\n      if (currentMenuItem && submenu !== currentMenuItem) {\r\n        toggleSubmenu(currentMenuItem);\r\n      }\r\n      toggleSubmenu(submenu);\r\n    };\r\n\r\n    const closeOpenMenu = (e) => {\r\n      if (currentMenuItem && !e.target.classList.contains(\"nav-link\")) {\r\n        toggleSubmenu(currentMenuItem);\r\n      }\r\n    };\r\n\r\n    const addConfirmationMessage = () => {\r\n      let conf = document.createElement(\"div\");\r\n      conf.className = \"success-message\";\r\n      conf.innerHTML = `<img src=\"assets/images/icons/icon-check.svg\" alt=\"confirmation icon\" class=\"check-icon\"><span class=\"confirmation-message\">Gracias por preinscribirte, revisa tu correo.</span>`;\r\n      document\r\n        .querySelector(\".hero-content\")\r\n        .replaceChild(conf, document.querySelector(\".bee_add_preinscripcion\"));\r\n    };\r\n\r\n    const submitEmail = (e) => {\r\n      e.preventDefault();\r\n      const data = new FormData(e.target);\r\n      const button = document.querySelector(\".btn-hero\");\r\n      button.classList.add(\"loading\");\r\n      if (fieldValidation.validate(\"email\", e.target.email)) {\r\n        postmasterService\r\n          .preinscribir(data)\r\n          .then((res) => {\r\n            addConfirmationMessage();\r\n          })\r\n          .catch((err) => {\r\n            button.classList.remove(\"loading\");\r\n            const message = document.createElement(\"p\");\r\n            message.className = \"error-label\";\r\n            message.textContent = err.message ?? \"Ocurrio un error\";\r\n            e.target.email.classList.add(\"isInvalid\");\r\n            e.target.insertAdjacentElement(\"beforeEnd\", message);\r\n          });\r\n      }\r\n    };\r\n\r\n    const loadPonentesPostmaster = () => {\r\n      postmasterService.getPonentes().then((res) => {\r\n        let fragment = document.createDocumentFragment();\r\n        if (res) {\r\n          res.data.forEach((ponente) => {\r\n            let item = document.createElement(\"div\");\r\n            item.className = \"swiper-slide\";\r\n            item.innerHTML = Templates.cardTemplate(ponente);\r\n            fragment.appendChild(item);\r\n          });\r\n        }\r\n        document.querySelector(\"#ponencias\").appendChild(fragment);\r\n\r\n        const swiper = new Swiper(\".swiper-container\", {\r\n          slidesPerView: 4,\r\n          loop: true,\r\n          slidesPerGroup: 4,\r\n          spaceBetween: 40,\r\n          // navigation: {\r\n          //   nextEl: \".swiper-button-next\",\r\n          //   prevEl: \".swiper-button-prev\",\r\n          // },\r\n          pagination: {\r\n            el: \".swiper-pagination\",\r\n            clickable: true,\r\n          },\r\n        });\r\n      });\r\n    };\r\n\r\n    const addListeners = () => {\r\n      window.addEventListener(\"scroll\", headerStyling);\r\n      document.querySelector(\".menu-btn\").addEventListener(\"click\", toggleButton);\r\n      document.querySelector(\".nav-list\").addEventListener(\"click\", toggleOnMenuClick);\r\n      document.addEventListener(\"click\", closeOpenMenu);\r\n\r\n      document.querySelector(\".bee_add_preinscripcion\")?.addEventListener(\"submit\", submitEmail);\r\n    };\r\n\r\n    return {\r\n      init,\r\n    };\r\n  })();\r\n\r\n  document.addEventListener(\"DOMContentLoaded\", App.init());\r\n})();\r\n","const Templates = (function () {\r\n  const URI = document.getElementById(\"images\").value;\r\n\r\n  const cardTemplate = ({ photo, name }) => {\r\n    const html = `<div class=\"card mb-3\">\r\n        <div class=\"card-header\">\r\n            <img src=\"${URI}postmaster/ponentes/${photo}\" height=\"280\" alt=\"#\">\r\n        </div>\r\n        <div class=\"card-body\">\r\n            <div class=\"name-price text-right\">\r\n                <div class=\"teacher-info \">\r\n                    <img src=\"${URI}paises/peru.jpg\" alt=\"country-flag\" class=\"card-icon\">\r\n                </div>\r\n            </div>\r\n            <div class=\"\">\r\n                <h3 class=\"c-title mb-1\">${name}</h3>\r\n                <p class=\"c-description\"></p>\r\n            </div>\r\n            <div class=\"card-footer\"><a href=\"javascript:void(0);\" class=\"btn-link\">Ver más <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 512 512\"><polyline points=\"268 112 412 256 268 400\" style=\"fill:none;stroke:#3f4ce7;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px\"/><line x1=\"392\" y1=\"256\" x2=\"100\" y2=\"256\" style=\"fill:none;stroke:#3f4ce7;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px\"/></svg></a></div>\r\n          </div>\r\n      </div>`;\r\n    return html;\r\n  };\r\n\r\n  return {\r\n    cardTemplate,\r\n  };\r\n})();\r\n","const fieldValidation = (function () {\r\n  const validate = (type, field) => {\r\n    const isValid = {\r\n      value: false,\r\n      message: \"\",\r\n    };\r\n\r\n    switch (type) {\r\n      case \"email\":\r\n        isValid.value = isEmail(field.value);\r\n        isValid.message = \"Email invalido\";\r\n        break;\r\n      case \"phone\":\r\n        isValid.value = isPhone(field.value);\r\n        isValid.message = \"Telefono invalido\";\r\n        break;\r\n      default:\r\n        isValid.value = false;\r\n    }\r\n\r\n    if (!isValid.value) {\r\n      writeError(field, isValid.message);\r\n      removeError(field);\r\n    }\r\n\r\n    return isValid.value;\r\n  };\r\n\r\n  const writeError = (obj, msj) => {\r\n    if (!obj.classList.contains(\"isInvalid\")) {\r\n      let errElem = document.createElement(\"p\");\r\n      errElem.className = \"error-label\";\r\n      errElem.textContent = msj;\r\n      obj.parentNode.appendChild(errElem);\r\n      obj.classList.add(\"isInvalid\");\r\n    }\r\n  };\r\n\r\n  const removeError = (el) => {\r\n    el.addEventListener(\"change\", () => {\r\n      if (el.classList.contains(\"isInvalid\")) {\r\n        el.classList.remove(\"isInvalid\");\r\n        el.parentNode.removeChild(el.nextElementSibling);\r\n      }\r\n    });\r\n  };\r\n  // ---\r\n  // helpers\r\n  // ---\r\n  const isEmail = (email) => {\r\n    let regex = /^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\r\n    return regex.test(email);\r\n  };\r\n\r\n  const isPhone = (phone) => {\r\n    let regex = /^([0-9]{10})+$/;\r\n    return regex.test(phone);\r\n  };\r\n\r\n  return {\r\n    validate,\r\n  };\r\n})();\r\n"]}